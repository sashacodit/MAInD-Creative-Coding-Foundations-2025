<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/style.css" />
    <script src="assets/APIKEy/apikey.js"></script>
    <script src="assets/script.js" defer></script>
    <title>Minesweeper</title>
</head>

<body>

    <h1>Minesweeper</h1>
    <div class="control-panel">
        <label>
            Board Size:
            <input type="number" id="boardSize" min="5" max="20" value="10">
        </label>
        <label>
            Bomb Amount:
            <input type="number" id="mineCount" min="1" max="50" value="10">
        </label>
        <button id="startGame">Start Game</button>
    </div>

    <div class="status-panel">
        <div class="status-chip">
            <span>Score</span>
            <strong id="scoreValue">0</strong>
        </div>
        <div class="status-chip">
            <span>High Score</span>
            <strong id="highScoreValue">0</strong>
        </div>
    </div>

    <dialog id="spriteSelectionDialog">
        <div class="sprite-dialog-content">
            <h2>Choose Your Sprites</h2>
            <div class="sprite-source-toggle">
                <button class="toggle-btn active" data-source="local" id="toggleLocal">Local Sprites</button>
                <button class="toggle-btn" data-source="giphy" id="toggleGiphy">GIPHY Images</button>
            </div>
            <div class="sprite-selection">
                <div class="sprite-group" id="bombGroup">
                    <h3>Bomb</h3>
                    <div class="sprite-options" id="bombOptions">
                        <div class="sprite-option" data-sprite="Bomb.svg" data-type="local">
                            <img src="assets/img/Bomb.svg" alt="Bomb 1">
                        </div>
                        <div class="sprite-option" data-sprite="Bomb2.svg" data-type="local">
                            <img src="assets/img/Bomb2.svg" alt="Bomb 2">
                        </div>
                        <div class="sprite-option" data-sprite="Bomb3.svg" data-type="local">
                            <img src="assets/img/Bomb3.svg" alt="Bomb 3">
                        </div>
                    </div>
                    <div class="loading-state" id="bombLoading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Loading GIPHY images...</p>
                    </div>
                    <div class="error-state" id="bombError" style="display: none;">
                        <p>Failed to load images. Please try again.</p>
                    </div>
                </div>
                <div class="sprite-group" id="flagGroup">
                    <h3>Flag</h3>
                    <div class="sprite-options" id="flagOptions">
                        <div class="sprite-option" data-sprite="Flag.svg" data-type="local">
                            <img src="assets/img/Flag.svg" alt="Flag 1">
                        </div>
                        <div class="sprite-option" data-sprite="Flag2.svg" data-type="local">
                            <img src="assets/img/Flag2.svg" alt="Flag 2">
                        </div>
                        <div class="sprite-option" data-sprite="Flag3.svg" data-type="local">
                            <img src="assets/img/Flag3.svg" alt="Flag 3">
                        </div>
                    </div>
                    <div class="loading-state" id="flagLoading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Loading GIPHY images...</p>
                    </div>
                    <div class="error-state" id="flagError" style="display: none;">
                        <p>Failed to load images. Please try again.</p>
                    </div>
                </div>
            </div>
            <button id="confirmSprites">Confirm</button>
        </div>
    </dialog>

    <dialog id="dialog">
        <div style="display: flex; flex-direction: column; align-items: center; gap: 12px;">
            <p id="dialogMessage"></p>
            <p id="dialogScore">Score: 0</p>
            <button id="dialogButton">Ok</button>
        </div>
    </dialog>

    <div id="board" ></div>

    <section class="info-panel">
        <div class="info-block">
            <h2 class="icon_and_text"><img src="assets/img/Rules.svg" alt="book" class="icon"">Rules</h2>
            <ul class="info-list">
                <li>Reveal every safe cell to win the round.</li>
                <li>Hitting a mine immediately ends the game.</li>
                <li>Use flags to mark suspected mines before revealing.</li>
                <li>Number on the revealed cell is the number of mines around the cell</li>
            </ul>
        </div>
        <div class="info-block">
            <h2 class="icon_and_text"><img src="assets/img/controls.svg" alt="keys" class="icon"">Controls</h2>
            <ul class="info-list">
                <li>Left click or press Enter to reveal the focused cell.</li>
                <li>Right click or press Space to place/remove a flag.</li>
                <li>Arrow keys to select the cell </li>
            </ul>
        </div>
        <div class="info-block">
            <h2 class="icon_and_text"><img src="assets/img/Score.svg" alt="score" class="icon">Scoring</h2>
            <ul class="info-list">
                <li>+10 points for every safe cell you reveal.</li>
            </ul>
        </div>
    </section>

    <audio id="gameOverSound" src="assets/sounds/bomb.mp3"></audio>
    <audio id="flagSound" src="assets/sounds/flag.mp3"></audio>
    <audio id="startSound" src="assets/sounds/start.mp3"></audio>
    <audio id="winSound" src="assets/sounds/win.mp3"></audio>
    

</body>

</html>